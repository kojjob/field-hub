/* See the Tailwind configuration guide for advanced usage
   https://tailwindcss.com/docs/configuration */

@import "tailwindcss" source(none);
@source "../css";
@source "../js";
@source "../../lib/field_hub_web";

/* A Tailwind plugin that makes "hero-#{ICON}" classes available.
   The heroicons installation itself is managed by your mix.exs */
@plugin "../vendor/heroicons";

/* Add variants based on LiveView classes */
@custom-variant phx-click-loading (.phx-click-loading&, .phx-click-loading &);
@custom-variant phx-submit-loading (.phx-submit-loading&, .phx-submit-loading &);
@custom-variant phx-change-loading (.phx-change-loading&, .phx-change-loading &);

/* Use the data attribute for dark mode  */
@custom-variant dark (&:where([data-theme=dark], [data-theme=dark] *));

/* Make LiveView wrapper divs transparent for layout */
[data-phx-session], [data-phx-teleported-src] { display: contents }

@theme {
  --color-primary: #115e59;
  --color-primary-hover: #0d9488;
  --color-secondary: #6366f1;
  --color-accent: #10b981;
  --color-neutral: #1e293b;
  --color-base-100: #ffffff;
  --color-base-200: #f8fafc;
  --color-base-300: #f1f5f9;
  
  --animate-gradient-x: gradient-x 15s ease infinite;
  --animate-fade-in: fade-in 1s ease-out forwards;
  --animate-slide-up: slide-up 0.8s ease-out forwards;

  @keyframes gradient-x {
    0%, 100% {
      background-size: 200% 200%;
      background-position: left center;
    }
    50% {
      background-size: 200% 200%;
      background-position: right center;
    }
  }

  @keyframes fade-in {
    from { opacity: 0; }
    to { opacity: 1; }
  }

  @keyframes slide-up {
    from { opacity: 0; transform: translateY(20px); }
    to { opacity: 1; transform: translateY(0); }
  }

  @keyframes slide-in-right {
    from { transform: translateX(100%); }
    to { transform: translateX(0); }
  }

  @keyframes slide-out-right {
    from { transform: translateX(0); }
    to { transform: translateX(100%); }
  }

  @keyframes scale-in {
    from { opacity: 0; transform: scale(0.95); }
    to { opacity: 1; transform: scale(1); }
  }

  @keyframes scale-out {
    from { opacity: 1; transform: scale(1); }
    to { opacity: 0; transform: scale(0.95); }
  }

  @keyframes slide-up-fade {
    from { opacity: 0; transform: translateY(10px); }
    to { opacity: 1; transform: translateY(0); }
  }

  @keyframes bounce-in {
    0% { opacity: 0; transform: scale(0.3); }
    50% { opacity: 1; transform: scale(1.05); }
    70% { transform: scale(0.9); }
    100% { opacity: 1; transform: scale(1); }
  }

  @keyframes shake {
    0%, 100% { transform: translateX(0); }
    10%, 30%, 50%, 70%, 90% { transform: translateX(-4px); }
    20%, 40%, 60%, 80% { transform: translateX(4px); }
  }

  --animate-shake: shake 0.5s ease-in-out;
}

/* Landing Page Theme System */
:root {
  --bg: 248 250 252;        /* slate-50 */
  --bg2: 241 245 249;       /* slate-100 */
  --panel: 255 255 255;     /* white */
  --panel2: 248 250 252;    /* slate-50 */
  --fg: 15 23 42;           /* slate-900 */
  --muted: 71 85 105;       /* slate-600 */
  --muted2: 100 116 139;    /* slate-500 */
  --border-color: 226 232 240;    /* slate-200 */
  --ring: 99 102 241;       /* indigo-500 */
  --shadow: 15 23 42;       /* slate-900 */
}

[data-theme="dark"] {
  --bg: 2 4 12;             /* Deepest Midnight */
  --bg2: 8 10 20;           /* Slate-950+ */
  --panel: 12 16 33;        /* Slate-900+ */
  --panel2: 6 8 18;         /* Dark Panel Accent */
  --fg: 248 250 252;        /* slate-50 */
  --muted: 148 163 184;     /* slate-400 */
  --muted2: 100 116 139;    /* slate-500 */
  --border-color: 30 41 59;       /* slate-800 */
  --ring: 99 102 241;       /* indigo-500 */
  --shadow: 0 0 0;          /* not used */
}

body {
  font-family: "Plus Jakarta Sans", sans-serif;
  background-color: rgb(var(--bg));
  color: rgb(var(--fg));
}

h1, h2, h3, h4, .font-display {
  font-family: "Outfit", sans-serif;
}

/* =========================================
   PURE TAILWIND COMPONENT IMPLEMENTATIONS
   (To replace DaisyUI)
   ========================================= */

/* Button System */
.btn {
  @apply inline-flex items-center justify-center px-4 py-2 text-sm font-semibold transition-all duration-200 rounded-xl cursor-pointer disabled:opacity-50 disabled:cursor-not-allowed active:scale-95;
}

.btn-primary {
  @apply bg-primary text-white hover:bg-primary-hover shadow-md shadow-primary/20;
}

.btn-outline {
  @apply border border-slate-200 dark:border-slate-700 hover:bg-slate-50 dark:hover:bg-slate-800 text-slate-700 dark:text-slate-200;
}

.btn-ghost {
  @apply hover:bg-slate-100 dark:hover:bg-slate-800 text-slate-600 dark:text-slate-400;
}

.btn-soft {
  @apply bg-primary/10 text-primary hover:bg-primary/20;
}

.btn-sm {
  @apply px-3 py-1.5 text-xs;
}

/* Alert/Toast System */
.toast {
  @apply fixed flex flex-col gap-2 pointer-events-none;
}

.toast-top { @apply top-4; }
.toast-end { @apply right-4; }

.alert {
  @apply flex items-center gap-3 p-4 rounded-2xl shadow-xl pointer-events-auto min-w-[320px] max-w-md animate-gradient-x border;
}

.alert-info {
  @apply bg-white dark:bg-slate-900 border-slate-100 dark:border-slate-800 text-slate-900 dark:text-white;
}

.alert-error {
  @apply bg-red-50 dark:bg-red-950/30 border-red-200 dark:border-red-900/50 text-red-700 dark:text-red-400;
}

/* Table System */
.table {
  @apply w-full text-left border-separate border-spacing-0;
}

.table th {
  @apply px-4 py-3 text-xs font-bold tracking-wider uppercase text-slate-500 dark:text-slate-400 border-b border-slate-100 dark:border-slate-800;
}

.table td {
  @apply px-4 py-4 text-sm text-slate-700 dark:text-slate-300 border-b border-slate-50 dark:border-slate-800/50;
}

.table-zebra tbody tr:nth-child(even) {
  @apply bg-slate-50/50 dark:bg-slate-900/30;
}

/* Checkbox System */
.checkbox {
  @apply size-5 rounded-md border-2 border-slate-300 dark:border-slate-600 appearance-none cursor-pointer transition-all checked:bg-primary checked:border-primary relative;
}

.checkbox:checked::after {
  content: "";
  @apply absolute inset-0 flex items-center justify-center;
  background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 20 20' fill='white'%3E%3Cpath fill-rule='evenodd' d='M16.704 4.126a1 1 0 01.146 1.407l-8 10a1 1 0 01-1.428.139l-5-4l1.236-1.546L8.14 13.51l7.157-8.947a1 1 0 011.407-.146z' clip-rule='evenodd'/%3E%3C/svg%3E");
}

.checkbox-sm {
  @apply size-4 rounded;
}

/* =========================================
   PREMIUM FORM INPUT STYLING (v3 - Pure Tailwind)
   ========================================= */

input[type="text"],
input[type="email"],
input[type="password"],
input[type="tel"],
input[type="number"],
input[type="search"],
input[type="url"],
input[type="date"],
input[type="time"],
input[type="datetime-local"],
select,
textarea,
.input,
.select,
.textarea {
  @apply w-full min-h-[44px] px-4 py-2 text-[15px] font-medium transition-all duration-200 outline-none rounded-xl;
  @apply bg-slate-50 dark:bg-slate-800 border-[1.5px] border-slate-300 dark:border-slate-700 text-slate-800 dark:text-slate-50;
  @apply focus:bg-white dark:focus:bg-slate-900 focus:border-primary focus:ring-4 focus:ring-primary/10 focus:-translate-y-0.5;
  @apply hover:border-slate-400 dark:hover:border-slate-600;
}

select {
  @apply appearance-none cursor-pointer pr-10;
  background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' fill='none' viewBox='0 0 24 24' stroke='%2364748b'%3E%3Cpath stroke-linecap='round' stroke-linejoin='round' stroke-width='2' d='M19 9l-7 7-7-7'%3E%3C/path%3E%3C/svg%3E");
  background-repeat: no-repeat;
  background-position: right 14px center;
  background-size: 18px;
}

textarea {
  @apply min-h-[120px] py-3.5 leading-relaxed;
}

::placeholder {
  @apply text-slate-400 dark:text-slate-500 font-normal opacity-70;
}

/* Form Structure Classes */
.label, label > span.label {
  @apply block text-[13.5px] font-semibold text-slate-600 dark:text-slate-400 mb-2 ml-0.5 tracking-tight;
}

.fieldset {
  @apply mb-5 w-full;
}

/* Error States */
.input-error,
.select-error,
.textarea-error {
  @apply border-red-500 dark:border-red-500/50 bg-red-50 dark:bg-red-950/20 !important;
  @apply focus:ring-red-500/10 !important;
}

.text-error {
  @apply text-red-600 dark:text-red-400;
}

/* Leaflet Map Overrides */
#map-view {
  @apply absolute inset-0 w-full h-full z-[1];
}

#map-view .leaflet-container {
  @apply w-full h-full;
}

.leaflet-div-icon, .tech-marker, .job-marker {
  @apply bg-transparent border-none;
}

.leaflet-control-container {
  @apply z-10;
}

.leaflet-popup-content-wrapper {
  @apply rounded-2xl p-0 shadow-2xl border border-slate-100 dark:border-slate-800 bg-white dark:bg-slate-900;
}

.leaflet-popup-content {
  @apply m-3 font-sans text-sm text-slate-700 dark:text-slate-300;
}

[data-theme="dark"] .leaflet-tile {
  filter: brightness(0.7) contrast(1.2) saturate(0.5) invert(1) hue-rotate(180deg);
}

/* Animation Utilities */
.animate-in {
  animation: slide-up 0.8s cubic-bezier(0.16, 1, 0.3, 1) forwards;
}

.animate-fade {
  animation: fade-in 1s ease-out forwards;
}

.panel-slide-in {
  animation: slide-in-right 0.3s cubic-bezier(0.16, 1, 0.3, 1) forwards;
}

.panel-slide-out {
  animation: slide-out-right 0.2s ease-in forwards;
}

.animate-shake {
  animation: shake 0.5s ease-in-out;
}
